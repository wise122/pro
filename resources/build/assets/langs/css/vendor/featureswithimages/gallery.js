$(function(){var a=$("#slideshow");a.find(".thumb").on("click",(function(){s($(this).data("thumb-id"))})),a.find("#prev-btn").on("click",(function(){e()})),a.find("#next-btn").on("click",(function(){i()})),$(document).keydown((function(a){switch(a.keyCode){case 37:e();break;case 39:i()}}));var i=function(){var i=a.find(".img-wrapper.active");0===i.length&&(i=a.find(".img-wrapper:last")),t(i)},t=function(i){var t=i.next(".img-wrapper").length?i.next(".img-wrapper"):a.find(".img-wrapper:first"),e=a.find('[data-thumb-id="'+t.data("img-id")+'"]');a.find(".thumb").removeClass("active"),e.addClass("active"),i.addClass("last-active"),c(e),t.css({opacity:0}).addClass("active").animate({opacity:1},1e3,(function(){i.removeClass("active last-active")}))},e=function(){var i=a.find(".img-wrapper.active");0===i.length&&(i=a.find(".img-wrapper:last")),n(i)},n=function(i){var t=i.prev(".img-wrapper").length?i.prev(".img-wrapper"):a.find(".img-wrapper:last"),e=a.find('[data-thumb-id="'+t.data("img-id")+'"]');a.find(".thumb").removeClass("active"),e.addClass("active"),i.addClass("last-active"),c(e),t.css({opacity:0}).addClass("active").animate({opacity:1},1e3,(function(){i.removeClass("active last-active")}))},s=function(i){var t=a.find('[data-img-id="'+i+'"]'),e=a.find('[data-thumb-id="'+i+'"]'),n=a.find(".img-wrapper.active");a.find(".thumb").removeClass("active"),n.addClass("last-active").removeClass("active"),e.addClass("active"),c(e),t.css({opacity:0}).addClass("active").animate({opacity:1},1e3,(function(){n.removeClass("last-active")}))},c=function(i){var t,e,n=i.position().left+parseInt(i.css("margin-left"),10);if(n<0)e=a.find(".thumb:first"),t=parseInt(e.css("margin-left"),10)-n,e.animate({marginLeft:t},1e3);else{var s=(n=i.position().left)+140-i.parent().width();s>0&&(e=a.find(".thumb:first"),t=parseInt(e.css("margin-left"),10)-s,e.animate({marginLeft:t},1e3))}}}());